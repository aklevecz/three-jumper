(self.webpackChunkthree_jumper=self.webpackChunkthree_jumper||[]).push([[826],{99:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(645),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,"body{font-family:monospace}div{user-select:none;-webkit-user-select:none}input{outline:none}button.absolute{cursor:pointer;background:#fff;padding:20px;position:absolute}button.absolute#start-button{left:50%;top:50%;margin-left:calc(200px / 2 * -1);margin-top:calc(100px / 2 * -1);width:200px;height:100px;font-size:30px;font-family:monospace;color:#f285ff;background:#fff;border:none;opacity:.7;z-index:9}button.absolute#pause-button{left:100%;width:100px;margin-left:-100px;font-family:monospace;color:#fff;font-weight:bold;background:none;border:none;border:#fff}#score-board{position:absolute;left:0;top:0;width:200px;height:100px;font-family:monospace;font-size:45px;color:#fff;pointer-events:none}#send-container{position:absolute;width:100%;display:flex;justify-content:center;top:15%;display:none}#send-container #send-wrapper{display:flex;justify-content:center;flex-wrap:wrap}#send-container #send-wrapper #send-input{flex:0 0 100%;height:50px;font-size:35px;text-align:center;max-width:375px;border:none;background:none;border-bottom:2px solid #fff;color:#fff}#send-container #send-wrapper #send-input::placeholder{color:#b5b2b2}#send-container #send-wrapper #send-button{flex:0 0 100%;max-width:185px;height:70px;margin:25px;background:#ff75e8;border:none;font-weight:bold;letter-spacing:3px;color:#fff}#high-scores{display:flex;align-items:center;flex-direction:column;position:absolute;color:#fff;font-size:20px;background:#f56df5;padding:30px;left:0;top:0;overflow:auto;height:50vh;width:100%;max-width:275px}#high-scores div{width:100%}#game-over{position:absolute;top:0px;left:0px;width:100%;height:100%;opacity:.7;background:gray;display:flex;justify-content:center;align-items:center;color:red;font-family:monospace;font-size:100px;display:none}",""]);const s=i},111:(e,t,n)=>{"use strict";var o=n(379),i=n.n(o),s=n(99);i()(s.Z,{insert:"head",singleton:!1}),s.Z.locals;var r=n(212),a=n(840),c=n(864),d=n(162),h=n(950),l=n(283);class p{constructor(e){this._position=new r.Pa4(0,5,0),this._velocity=0,this._playerBox=new r.aLr,this.gameOver=!1,this._OnKeyDown=e=>{switch(e.code){case"Space":this._keys.space=!0}},this._OnKeyUp=e=>{switch(e.code){case"Space":this._keys.space=!1}},this._OnTouchStart=e=>{this._keys.space=!0},this._OnTouchEnd=()=>{this._keys.space=!1},this._params=e,this._LoadModel(),this._InitInput()}_LoadModel(){const e=new r.lLk;e.addHandler(/\.dds$/i,new d.R),new c.v(e).load(l,(t=>{t.preload(),new a.L(e).setMaterials(t).load(h,(e=>{e.scale.setScalar(.06),e.quaternion.setFromAxisAngle(new r.Pa4(0,1,0),Math.PI/2),e.traverse((e=>{e.castShadow=!0})),this._mesh=e,this._params.scene.add(e)}))}))}_InitInput(){this._keys={spacebar:!1},this.oldKeys=Object.assign({},this._keys),document.addEventListener("keydown",this._OnKeyDown,!1),document.addEventListener("keyup",this._OnKeyUp,!1),document.addEventListener("touchstart",this._OnTouchStart,!1),document.addEventListener("touchend",this._OnTouchEnd,!1)}_CheckCollision(){const e=this._params.world.GetColliders();this._playerBox.set(this._mesh.position,1),this._playerBox.center.y+=1;for(let t of e){const e=t._collider;this._playerBox.intersectsBox(e)&&(this.gameOver=!0)}}Update(e){this._keys.space&&0==this._position.y&&(this._velocity=40);const t=-75*e;this._position.y+=e*(this._velocity+.5*t),this._position.y=Math.max(this._position.y,0),this._velocity+=t,this._velocity=Math.max(this._velocity,-100),this._mesh&&(this._mesh.position.copy(this._position),this._CheckCollision())}}const m="https://yr-codes.raptor.pizza/api",_={"Content-Type":"application/json"},u="POST",f=({bid:e,time:t,tick:n,epoch:o})=>fetch(`${m}/tick`,{method:u,headers:_,body:JSON.stringify({bid:e,time:t,tick:n,epoch:o})}).then((e=>e.json())).catch((e=>{console.log(e)})),w=function(e,t){return Math.random()*(t-e)+e},v=function(e,t){return Math.round(Math.random()*(t-e)+e)};var b=n(130),g=n(20);class y{constructor(e){this._position=new r.Pa4(0,0,0),this._quaternion=new r._fP,this._scale=1,this._collider=new r.ZzF,this._mesh=new r.ZAu,this._params=e,this._LoadModel()}_LoadModel(){const e=new r.lLk;e.addHandler(/\.dds$/i,new d.R),new c.v(e).load(g,(t=>{t.preload(),new a.L(e).setMaterials(t).load(b,(e=>{e.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0})),this._mesh=e,this._params.scene.add(e)}))}))}_UpdateCollider(){this._collider.setFromObject(this._mesh)}Update(e){this._mesh&&(this._mesh.position.copy(this._position),this._mesh.quaternion.copy(this._quaternion),this._mesh.scale.setScalar(this._scale),this._UpdateCollider())}}class x{constructor(e){this._objects=[],this._unused=[],this._speed=22,this._score=0,this._scoreText="00000",this._separationDistance=20,this._params=e}GetColliders(){return this._objects}_LastObjectPosition(){return 0===this._objects.length?20:this._objects[this._objects.length-1]._position.x}_SpawnObj(e,t){let n=null;this._unused.length>0?(n=this._unused.pop(),n._mesh.visible=!0):n=new y(this._params),n._position.x=100+t,this._objects.push(n)}_SpawnCluster(){const e=v(0,1),t=[2,3.5][e],n=v(1,[2,3][e]);for(let e=0;e<n;e++){const n=1*e*t;this._SpawnObj(t,n)}}_MaybeSpawn(){const e=this._LastObjectPosition();Math.abs(100-e)>this._separationDistance&&(this._SpawnCluster(),this._separationDistance=w(20,50))}Update(e){this._MaybeSpawn(),this._UpdateColliders(e),this._UpdateScore(e)}_UpdateScore(e){this._score+=e+10;const t=Math.round(this._score).toLocaleString("en-US",{minimumIntegerDigits:5,useGrouping:!1});t!=this._scoreText&&(document.getElementById("score-board").innerText=t)}_UpdateColliders(e){const t=[],n=[];for(let o of this._objects)o._position.x-=e*this._speed,this._speed+=.001,o._position.x<-20?(t.push(o),o._mesh.visible=!1):n.push(o),o.Update(e);this._objects=n,this._unused.push(...t)}}const S=n(698),k=n(670);var C=n(595);const E=document.body;E.style.margin="0px";const I=document.createElement("div"),O=document.createElement("button");O.id="start-button",O.className="absolute",O.innerText="START",I.appendChild(O),E.appendChild(I);const j=document.createElement("div");j.id="score-board",E.appendChild(j);const R=document.createElement("button");R.id="pause-button",R.className="absolute",R.innerText="PAUSE",E.appendChild(R);const T=document.createElement("div");T.id="game-over",T.innerText="GAME OVER",E.appendChild(T);const z=document.createElement("div");z.id="send-container";const M=document.createElement("div");M.id="send-wrapper";const P=document.createElement("input");P.autofocus=!0,P.placeholder="name or email",P.id="send-input";const L=document.createElement("button");L.id="send-button",L.innerText="SEND IT",M.appendChild(P),M.appendChild(L),z.appendChild(M),E.appendChild(z);const U=document.createElement("div");U.id="high-scores",U.innerText="HIGH SCORES",fetch(`${m}/high-scores`).then((e=>e.json())).then((e=>{e.sort(((e,t)=>t.score-e.score)).forEach((e=>{const t=document.createElement("div");t.innerText=`${e.score}  ${e.name}`,U.appendChild(t)}))})),E.appendChild(U),C.zD().then((e=>{e.get().then((e=>{const t=e.visitorId;window.localStorage.getItem("bid")||window.localStorage.setItem("bid",t)}))})),new class{constructor(){this._gameStarted=!1,this._gameOver=!1,this._previousRAF=null,this._paused=!0,this._stop=!1,this._tick=1,this._lights=[],this._onWindowResize=()=>{this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(window.innerWidth,window.innerHeight)};const e=document.getElementById("start-button"),t=document.getElementById("pause-button"),n=document.getElementById("high-scores");this._OnStart(),e.onclick=()=>{this._paused=!1,e.remove(),n.remove(),f({bid:window.localStorage.getItem("bid"),time:0,tick:0,epoch:"0"}).then((e=>{this._epoch=e}))},t.onclick=()=>{this._paused=!this._paused,t.innerText=this._paused?"RESUME":"PAUSED"}}_OnStart(){this._Init(),this._gameStarted=!0}_Init(){this._renderer=new r.CP7({antialias:!0}),this._renderer.gammaFactor=4.2,this._renderer.shadowMap.enabled=!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this._renderer.domElement),window.addEventListener("resize",this._onWindowResize,!1),this._camera=new r.cPb(60,1920/1080,1,2e4),this._camera.position.set(-5,5,10),this._camera.lookAt(8,3,0),this._scene=new r.xsS;const e=new r.Ox3(16777215,1);e.position.set(-10,10,0),e.target.position.set(20,0,0),e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.width=4096,e.shadow.mapSize.height=4096,e.shadow.camera.far=200,e.shadow.camera.near=1,e.shadow.camera.left=50,e.shadow.camera.right=-50,e.shadow.camera.top=50,e.shadow.camera.bottom=-50,this._scene.add(e);const t=new r.vmT(2105376,16512,.6);this._lights.push(t);for(let e=0;e<this._lights.length;e++)this._scene.add(this._lights[e]);this._scene.fog=new r.yo9(9024235,.01125),this._scene.background=new r.Ilk(255,255,0),this._guniforms={iTime:{value:0},iResolution:{value:new r.Pa4(window.innerWidth,window.innerHeight,1)}};const n=new r.Kj0(new r._12(2e4,2e4,10,10),new r.YBo({color:16777215}));n.castShadow=!1,n.receiveShadow=!0,n.rotation.x=-Math.PI/2,this._scene.add(n),this._suniforms={topColor:{value:new r.Ilk(30719)},bottomColor:{value:new r.Ilk(9024235)},offset:{value:33},exponent:{value:.6},iTime:{value:0},iResolution:{value:new r.Pa4(window.innerWidth,window.innerHeight,1)}};const o=new r.Aip(1e3,32,15),i=new r.jyz({uniforms:this._suniforms,vertexShader:k,fragmentShader:S,side:r._Li});this._scene.add(new r.Kj0(o,i)),this._world=new x({scene:this._scene}),this._player=new p({scene:this._scene,world:this._world}),this._RAF(),this._onWindowResize()}_RAF(){requestAnimationFrame((e=>{this._stop||(null===this._previousRAF&&(this._previousRAF=e),this._suniforms.iTime.value+=.03,this._RAF(),this._Step((e-this._previousRAF)/1e3),this._renderer.render(this._scene,this._camera),this._previousRAF=e)}))}_GameOver(){document.getElementById("game-over").style.display="flex",document.getElementById("send-container").style.display="flex",this._stop=!0,f({bid:window.localStorage.getItem("bid"),time:this._world._score,tick:this._tick,epoch:this._epoch}),document.getElementById("send-button").onclick=()=>{const e=document.getElementById("score-board").innerText;document.getElementById("send-button").disabled=!0,(({bid:e,score:t,epoch:n,name:o})=>fetch(`${m}/final-score`,{method:u,headers:_,body:JSON.stringify({bid:e,score:t,epoch:n,name:o})}))({bid:window.localStorage.getItem("bid"),score:e,epoch:this._epoch,name:document.getElementById("send-input").value}).then((()=>{document.body.style.fontSize="100px",document.body.innerHTML=`Nice! you got ${e}!!!`})).catch((e=>{alert("oh dear there was an error, I'm sorry :(")}))}}_Step(e){this._gameOver||!this._gameStarted||this._paused?this._gameOver&&this._GameOver():(this._world._score>1e3*this._tick&&(f({bid:window.localStorage.getItem("bid"),time:this._world._score,tick:this._tick,epoch:this._epoch}),this._tick+=1),this._player.Update(e),this._world.Update(e),this._player.gameOver&&!this._gameOver&&(this._gameOver=!0))}}},698:e=>{e.exports="\r\nconst mat2 m = mat2( 0.80,  0.60, -0.60,  0.80 );\r\nuniform vec3 iResolution;\r\nuniform float iTime;\r\nvarying vec2 vUv;\r\n\r\nfloat noise( in vec2 p )\r\n{\r\n\treturn sin(p.x)*sin(p.y);\r\n}\r\n\r\nfloat fbm4( vec2 p )\r\n{\r\n    float f = 0.0;\r\n    f += 0.5000*noise( p ); p = m*p*2.02;\r\n    f += 0.2500*noise( p ); p = m*p*2.03;\r\n    f += 0.1250*noise( p ); p = m*p*2.01;\r\n    f += 0.0625*noise( p );\r\n    return f/0.9375;\r\n}\r\n\r\nfloat fbm6( vec2 p )\r\n{\r\n    float f = 0.0;\r\n    f += 0.500000*(0.5+0.5*noise( p )); p = m*p*2.02;\r\n    f += 0.250000*(0.5+0.5*noise( p )); p = m*p*2.03;\r\n    f += 0.125000*(0.5+0.5*noise( p )); p = m*p*2.01;\r\n    f += 0.062500*(0.5+0.5*noise( p )); p = m*p*2.04;\r\n    f += 0.031250*(0.5+0.5*noise( p )); p = m*p*2.01;\r\n    f += 0.015625*(0.5+0.5*noise( p ));\r\n    return f/0.96875;\r\n}\r\n\r\nvec2 fbm4_2( vec2 p )\r\n{\r\n    return vec2(fbm4(p), fbm4(p+vec2(7.8)));\r\n}\r\n\r\nvec2 fbm6_2( vec2 p )\r\n{\r\n    return vec2(fbm6(p+vec2(16.8)), fbm6(p+vec2(11.5)));\r\n}\r\n\r\n//====================================================================\r\n\r\nfloat func( vec2 q, out vec4 ron )\r\n{\r\n    q += 0.03*sin( vec2(0.27,0.23)*iTime + length(q)*vec2(4.1,4.3));\r\n\r\n\tvec2 o = fbm4_2( 0.9*q );\r\n\r\n    o += 0.04*sin( vec2(0.12,0.14)*iTime + length(o));\r\n\r\n    vec2 n = fbm6_2( 3.0*o );\r\n\r\n\tron = vec4( o, n );\r\n\r\n    float f = 0.5 + 0.5*fbm4( 1.8*q + 6.0*n );\r\n\r\n    return mix( f, f*f*f*3.5, f*abs(n.x) );\r\n}\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n{\r\n    //vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;\r\n    float e = 2.0/iResolution.y;\r\n\r\n    vec2 p = fragCoord/iResolution.xy;\r\n\r\n    vec4 on = vec4(0.0);\r\n    float f = func(p, on);\r\n\r\n\tvec3 col = vec3(0.0);\r\n    col = mix( vec3(0.2,0.1,0.4), vec3(0.3,0.05,0.05), f );\r\n    col = mix( col, vec3(0.1,0.9,0.3), dot(on.zw,on.zw) );\r\n    col = mix( col, vec3(0.1,0.3,0.3), 0.2 + 0.5*on.y*on.y );\r\n    col = mix( col, vec3(0.0,0.2,0.4), 0.5*smoothstep(1.2,1.3,abs(on.z)+abs(on.w)) );\r\n    col = clamp( col*f*2.0, 0.0, 1.0 );\r\n    \r\n#if 1\r\n    // gpu derivatives - bad quality, but fast\r\n\tvec3 nor = normalize( vec3( dFdx(f)*iResolution.x, 6.0, dFdy(f)*iResolution.y ) );\r\n#else    \r\n    // manual derivatives - better quality, but slower\r\n    vec4 kk;\r\n \tvec3 nor = normalize( vec3( func(p+vec2(e,0.0),kk)-f, \r\n                                2.0*e,\r\n                                func(p+vec2(0.0,e),kk)-f ) );\r\n#endif    \r\n\r\n    vec3 lig = normalize( vec3( 0.9, 0.2, -0.4 ) );\r\n    float dif = clamp( 0.3+0.7*dot( nor, lig ), 0.0, 1.0 );\r\n    vec3 lin = vec3(0.70,0.90,0.95)*(nor.y*0.5+0.5) + vec3(0.15,0.10,0.05)*dif;\r\n    col *= 1.2*lin;\r\n\tcol = 1.0 - col;\r\n\tcol = 1.1*col*col;\r\n    \r\n    fragColor = vec4( col, 1.0 );\r\n}\r\nvoid main() {\r\n  mainImage(gl_FragColor, gl_FragCoord.xy);\r\n}"},670:e=>{e.exports="varying vec3 vWorldPosition;\r\nvoid main() {\r\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n  vWorldPosition = worldPosition.xyz;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}"},283:(e,t,n)=>{"use strict";e.exports=n.p+"45a3a73089d36a2de4c8.mtl"},950:(e,t,n)=>{"use strict";e.exports=n.p+"00acf16443a85926b45c.obj"},20:(e,t,n)=>{"use strict";e.exports=n.p+"ec04be372674275bda28.mtl"},130:(e,t,n)=>{"use strict";e.exports=n.p+"f6da34962a67f89fe05c.obj"}},0,[[111,666,216]]]);