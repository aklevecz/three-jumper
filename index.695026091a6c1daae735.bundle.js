(self.webpackChunkthree_jumper=self.webpackChunkthree_jumper||[]).push([[826],{99:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,"body{font-family:monospace}div{user-select:none;-webkit-user-select:none}input{outline:none}button.absolute{cursor:pointer;background:#fff;padding:20px;position:absolute}button.absolute#start-button{left:50%;top:50%;margin-left:calc(200px / 2 * -1);margin-top:calc(100px / 2 * -1);width:200px;height:100px;font-size:30px;font-family:monospace;color:#f285ff;background:#fff;border:none;opacity:.7}button.absolute#pause-button{left:100%;width:100px;margin-left:-100px;font-family:monospace;color:#fff;font-weight:bold;background:none;border:none;border:#fff}#score-board{position:absolute;left:0;top:0;width:200px;height:100px;font-family:monospace;font-size:45px;color:#fff;pointer-events:none}#send-container{position:absolute;width:100%;display:flex;justify-content:center;top:15%;display:none}#send-container #send-wrapper{display:flex;justify-content:center;flex-wrap:wrap}#send-container #send-wrapper #send-input{flex:0 0 100%;height:50px;font-size:35px;text-align:center;max-width:375px;border:none;background:none;border-bottom:2px solid #fff;color:#fff}#send-container #send-wrapper #send-button{flex:0 0 100%;max-width:185px;height:70px;margin:25px;background:#ff75e8;border:none;font-weight:bold;letter-spacing:3px;color:#fff}#game-over{position:absolute;top:0px;left:0px;width:100%;height:100%;opacity:.7;background:gray;display:flex;justify-content:center;align-items:center;color:red;font-family:monospace;font-size:100px;display:none}",""]);const s=o},111:(e,t,n)=>{"use strict";var i=n(379),o=n.n(i),s=n(99);o()(s.Z,{insert:"head",singleton:!1}),s.Z.locals;var a=n(212),r=n(840),c=n(864),d=n(162),h=n(950),l=n(283);class p{constructor(e){this._position=new a.Pa4(0,5,0),this._velocity=0,this._playerBox=new a.aLr,this.gameOver=!1,this._OnKeyDown=e=>{switch(e.code){case"Space":this._keys.space=!0}},this._OnKeyUp=e=>{switch(e.code){case"Space":this._keys.space=!1}},this._OnTouchStart=e=>{this._keys.space=!0},this._OnTouchEnd=()=>{this._keys.space=!1},this._params=e,this._LoadModel(),this._InitInput()}_LoadModel(){const e=new a.lLk;e.addHandler(/\.dds$/i,new d.R),new c.v(e).load(l,(t=>{t.preload(),new r.L(e).setMaterials(t).load(h,(e=>{e.scale.setScalar(.06),e.quaternion.setFromAxisAngle(new a.Pa4(0,1,0),Math.PI/2),e.traverse((e=>{e.castShadow=!0})),this._mesh=e,this._params.scene.add(e)}))}))}_InitInput(){this._keys={spacebar:!1},this.oldKeys=Object.assign({},this._keys),document.addEventListener("keydown",this._OnKeyDown,!1),document.addEventListener("keyup",this._OnKeyUp,!1),document.addEventListener("touchstart",this._OnTouchStart,!1),document.addEventListener("touchend",this._OnTouchEnd,!1)}_CheckCollision(){const e=this._params.world.GetColliders();this._playerBox.set(this._mesh.position,1);for(let t of e){const e=t._collider;this._playerBox.intersectsBox(e)&&(this.gameOver=!0)}}Update(e){this._keys.space&&0==this._position.y&&(this._velocity=40);const t=-75*e;this._position.y+=e*(this._velocity+.5*t),this._position.y=Math.max(this._position.y,0),this._velocity+=t,this._velocity=Math.max(this._velocity,-100),this._mesh&&(this._mesh.position.copy(this._position),this._CheckCollision())}}const _="https://yr-codes.raptor.pizza/api",m=({bid:e,time:t,tick:n,epoch:i})=>fetch(`${_}/tick`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:e,time:t,tick:n,epoch:i})}).then((e=>e.json())).catch((e=>{console.log(e)})),u=function(e,t){return Math.random()*(t-e)+e},f=function(e,t){return Math.round(Math.random()*(t-e)+e)};var w=n(130),v=n(20);class b{constructor(e){this._position=new a.Pa4(0,0,0),this._quaternion=new a._fP,this._scale=1,this._collider=new a.ZzF,this._mesh=new a.ZAu,this._params=e,this._LoadModel()}_LoadModel(){const e=new a.lLk;e.addHandler(/\.dds$/i,new d.R),new c.v(e).load(v,(t=>{t.preload(),new r.L(e).setMaterials(t).load(w,(e=>{e.traverse((e=>{e.castShadow=!0,e.receiveShadow=!0})),this._mesh=e,this._params.scene.add(e)}))}))}_UpdateCollider(){this._collider.setFromObject(this._mesh)}Update(e){this._mesh&&(this._mesh.position.copy(this._position),this._mesh.quaternion.copy(this._quaternion),this._mesh.scale.setScalar(this._scale),this._UpdateCollider())}}class g{constructor(e){this._objects=[],this._unused=[],this._speed=22,this._score=0,this._scoreText="00000",this._separationDistance=20,this._params=e}GetColliders(){return this._objects}_LastObjectPosition(){return 0===this._objects.length?20:this._objects[this._objects.length-1]._position.x}_SpawnObj(e,t){let n=null;this._unused.length>0?(n=this._unused.pop(),n._mesh.visible=!0):n=new b(this._params),n._position.x=100+t,this._objects.push(n)}_SpawnCluster(){const e=f(0,1),t=[2,3.5][e],n=f(1,[2,3][e]);for(let e=0;e<n;e++){const n=1*e*t;this._SpawnObj(t,n)}}_MaybeSpawn(){const e=this._LastObjectPosition();Math.abs(100-e)>this._separationDistance&&(this._SpawnCluster(),this._separationDistance=u(20,50))}Update(e){this._MaybeSpawn(),this._UpdateColliders(e),this._UpdateScore(e)}_UpdateScore(e){this._score+=e+10;const t=Math.round(this._score).toLocaleString("en-US",{minimumIntegerDigits:5,useGrouping:!1});t!=this._scoreText&&(document.getElementById("score-board").innerText=t)}_UpdateColliders(e){const t=[],n=[];for(let i of this._objects)i._position.x-=e*this._speed,this._speed+=.001,i._position.x<-20?(t.push(i),i._mesh.visible=!1):n.push(i),i.Update(e);this._objects=n,this._unused.push(...t)}}var y=n(595);const x=document.body;x.style.margin="0px";const S=document.createElement("div"),k=document.createElement("button");k.id="start-button",k.className="absolute",k.innerText="START",S.appendChild(k),x.appendChild(S);const C=document.createElement("div");C.id="score-board",x.appendChild(C);const E=document.createElement("button");E.id="pause-button",E.className="absolute",E.innerText="PAUSE",x.appendChild(E);const I=document.createElement("div");I.id="game-over",I.innerText="GAME OVER",x.appendChild(I);const O=document.createElement("div");O.id="send-container";const j=document.createElement("div");j.id="send-wrapper";const T=document.createElement("input");T.autofocus=!0,T.id="send-input";const R=document.createElement("button");R.id="send-button",R.innerText="SEND IT",j.appendChild(T),j.appendChild(R),O.appendChild(j),x.appendChild(O),y.zD().then((e=>{e.get().then((e=>{const t=e.visitorId;window.localStorage.getItem("bid")||window.localStorage.setItem("bid",t)}))})),new class{constructor(){this._gameStarted=!1,this._gameOver=!1,this._previousRAF=null,this._paused=!0,this._stop=!1,this._tick=1,this._lights=[],this._onWindowResize=()=>{this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(window.innerWidth,window.innerHeight)};const e=document.getElementById("start-button"),t=document.getElementById("pause-button");this._OnStart(),e.onclick=()=>{this._paused=!1,e.remove(),m({bid:window.localStorage.getItem("bid"),time:0,tick:0,epoch:"0"}).then((e=>{this._epoch=e}))},t.onclick=()=>{this._paused=!this._paused,t.innerText=this._paused?"RESUME":"PAUSED"}}_OnStart(){this._Init(),this._gameStarted=!0}_Init(){this._renderer=new a.CP7({antialias:!0}),this._renderer.gammaFactor=4.2,this._renderer.shadowMap.enabled=!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this._renderer.domElement),window.addEventListener("resize",this._onWindowResize,!1),this._camera=new a.cPb(60,1920/1080,1,2e4),this._camera.position.set(-5,5,10),this._camera.lookAt(8,3,0),this._scene=new a.xsS;const e=new a.Ox3(16777215,1);e.position.set(-10,10,0),e.target.position.set(20,0,0),e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.width=4096,e.shadow.mapSize.height=4096,e.shadow.camera.far=200,e.shadow.camera.near=1,e.shadow.camera.left=50,e.shadow.camera.right=-50,e.shadow.camera.top=50,e.shadow.camera.bottom=-50,this._scene.add(e);const t=new a.vmT(2105376,16512,.6);this._lights.push(t);for(let e=0;e<this._lights.length;e++)this._scene.add(this._lights[e]);this._scene.fog=new a.yo9(9024235,.01125),this._scene.background=new a.Ilk(255,255,0),this._guniforms={iTime:{value:0},iResolution:{value:new a.Pa4(window.innerWidth,window.innerHeight,1)}};const n=new a.Kj0(new a._12(2e4,2e4,10,10),new a.YBo({color:16777215}));n.castShadow=!1,n.receiveShadow=!0,n.rotation.x=-Math.PI/2,this._scene.add(n),this._suniforms={topColor:{value:new a.Ilk(30719)},bottomColor:{value:new a.Ilk(9024235)},offset:{value:33},exponent:{value:.6},iTime:{value:0},iResolution:{value:new a.Pa4(window.innerWidth,window.innerHeight,1)}};const i=new a.Aip(1e3,32,15),o=new a.jyz({uniforms:this._suniforms,vertexShader:"\nvarying vec3 vWorldPosition;\nvoid main() {\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nconst mat2 m = mat2( 0.80,  0.60, -0.60,  0.80 );\nuniform vec3 iResolution;\nuniform float iTime;\nvarying vec2 vUv;\n\nfloat noise( in vec2 p )\n{\n\treturn sin(p.x)*sin(p.y);\n}\n\nfloat fbm4( vec2 p )\n{\n    float f = 0.0;\n    f += 0.5000*noise( p ); p = m*p*2.02;\n    f += 0.2500*noise( p ); p = m*p*2.03;\n    f += 0.1250*noise( p ); p = m*p*2.01;\n    f += 0.0625*noise( p );\n    return f/0.9375;\n}\n\nfloat fbm6( vec2 p )\n{\n    float f = 0.0;\n    f += 0.500000*(0.5+0.5*noise( p )); p = m*p*2.02;\n    f += 0.250000*(0.5+0.5*noise( p )); p = m*p*2.03;\n    f += 0.125000*(0.5+0.5*noise( p )); p = m*p*2.01;\n    f += 0.062500*(0.5+0.5*noise( p )); p = m*p*2.04;\n    f += 0.031250*(0.5+0.5*noise( p )); p = m*p*2.01;\n    f += 0.015625*(0.5+0.5*noise( p ));\n    return f/0.96875;\n}\n\nvec2 fbm4_2( vec2 p )\n{\n    return vec2(fbm4(p), fbm4(p+vec2(7.8)));\n}\n\nvec2 fbm6_2( vec2 p )\n{\n    return vec2(fbm6(p+vec2(16.8)), fbm6(p+vec2(11.5)));\n}\n\n//====================================================================\n\nfloat func( vec2 q, out vec4 ron )\n{\n    q += 0.03*sin( vec2(0.27,0.23)*iTime + length(q)*vec2(4.1,4.3));\n\n\tvec2 o = fbm4_2( 0.9*q );\n\n    o += 0.04*sin( vec2(0.12,0.14)*iTime + length(o));\n\n    vec2 n = fbm6_2( 3.0*o );\n\n\tron = vec4( o, n );\n\n    float f = 0.5 + 0.5*fbm4( 1.8*q + 6.0*n );\n\n    return mix( f, f*f*f*3.5, f*abs(n.x) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    //vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;\n    float e = 2.0/iResolution.y;\n\n    vec2 p = fragCoord/iResolution.xy;\n\n    vec4 on = vec4(0.0);\n    float f = func(p, on);\n\n\tvec3 col = vec3(0.0);\n    col = mix( vec3(0.2,0.1,0.4), vec3(0.3,0.05,0.05), f );\n    col = mix( col, vec3(0.1,0.9,0.3), dot(on.zw,on.zw) );\n    col = mix( col, vec3(0.1,0.3,0.3), 0.2 + 0.5*on.y*on.y );\n    col = mix( col, vec3(0.0,0.2,0.4), 0.5*smoothstep(1.2,1.3,abs(on.z)+abs(on.w)) );\n    col = clamp( col*f*2.0, 0.0, 1.0 );\n    \n#if 0\n    // gpu derivatives - bad quality, but fast\n\tvec3 nor = normalize( vec3( dFdx(f)*iResolution.x, 6.0, dFdy(f)*iResolution.y ) );\n#else    \n    // manual derivatives - better quality, but slower\n    vec4 kk;\n \tvec3 nor = normalize( vec3( func(p+vec2(e,0.0),kk)-f, \n                                2.0*e,\n                                func(p+vec2(0.0,e),kk)-f ) );\n#endif    \n\n    vec3 lig = normalize( vec3( 0.9, 0.2, -0.4 ) );\n    float dif = clamp( 0.3+0.7*dot( nor, lig ), 0.0, 1.0 );\n    vec3 lin = vec3(0.70,0.90,0.95)*(nor.y*0.5+0.5) + vec3(0.15,0.10,0.05)*dif;\n    col *= 1.2*lin;\n\tcol = 1.0 - col;\n\tcol = 1.1*col*col;\n    \n    fragColor = vec4( col, 1.0 );\n}\nvoid main() {\n  mainImage(gl_FragColor, gl_FragCoord.xy);\n}\n",side:a._Li});this._scene.add(new a.Kj0(i,o)),this._world=new g({scene:this._scene}),this._player=new p({scene:this._scene,world:this._world}),this._RAF(),this._onWindowResize()}_RAF(){requestAnimationFrame((e=>{this._stop||(null===this._previousRAF&&(this._previousRAF=e),this._suniforms.iTime.value+=.03,this._RAF(),this._Step((e-this._previousRAF)/1e3),this._renderer.render(this._scene,this._camera),this._previousRAF=e)}))}_Step(e){this._gameOver||!this._gameStarted||this._paused?this._gameOver&&(document.getElementById("game-over").style.display="flex",document.getElementById("send-container").style.display="flex",this._stop=!0,m({bid:window.localStorage.getItem("bid"),time:this._world._score,tick:this._tick,epoch:this._epoch}),document.getElementById("send-button").onclick=()=>{const e=document.getElementById("score-board").innerText;(({bid:e,score:t,epoch:n,name:i})=>fetch(`${_}/final-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:e,score:t,epoch:n,name:i})}))({bid:window.localStorage.getItem("bid"),score:e,epoch:this._epoch,name:document.getElementById("send-input").value}).then((()=>{document.body.style.fontSize="100px",document.body.innerHTML=`Nice! you got ${e}!!!`}))}):(this._world._score>1e3*this._tick&&(m({bid:window.localStorage.getItem("bid"),time:this._world._score,tick:this._tick,epoch:this._epoch}),this._tick+=1),this._player.Update(e),this._world.Update(e),this._player.gameOver&&!this._gameOver&&(this._gameOver=!0))}}},283:(e,t,n)=>{"use strict";e.exports=n.p+"45a3a73089d36a2de4c8.mtl"},950:(e,t,n)=>{"use strict";e.exports=n.p+"00acf16443a85926b45c.obj"},20:(e,t,n)=>{"use strict";e.exports=n.p+"ec04be372674275bda28.mtl"},130:(e,t,n)=>{"use strict";e.exports=n.p+"f6da34962a67f89fe05c.obj"}},0,[[111,666,216]]]);